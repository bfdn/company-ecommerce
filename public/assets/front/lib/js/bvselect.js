class BVSelect{constructor({selector:e="defaultId",width:t="100%",searchbox:n=!1,search_autofocus:o=!1,offset:s=!0,search_placeholder:l="Search...",placeholder:i="Select Option",breakpoint:r="600"}){var a=Math.floor(1e4*Math.random())+0,d=l,c=i,u=0,m=[],y="",p=e.substring(1);function g(){var e=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),t=document.getElementById("ul_"+a).lastChild.getBoundingClientRect().top;Math.round(t+50)>Math.round(e)?(u=a,document.getElementById("ul_"+a).style.position="fixed",document.getElementById("ul_"+a).style.bottom="0px"):(u=0,document.getElementById("ul_"+a).style.position="absolute",document.getElementById("ul_"+a).style.bottom="")}this.selector=e.substring(1),this.searchbox=n,this.width=t,this.offset=s,this.randomID=a,this.search_placeholder,this.breakpoint=r,this.search_autofocus=o,document.getElementById(this.selector).style.display="none",this.SetupListOptions=function(){for(var e=document.getElementById(this.selector),t=0;t<e.length;t++){var n=e[t].text,o=(e[t].value,e[t].disabled),s=e[t].getAttribute("data-separator"),l=e[t].getAttribute("data-img"),i=e[t].getAttribute("data-icon");if(1==o)var r="bv_disabled";else r="";if(s)var d="bv_separator";else d="";if(l)var u="<img src="+l+">";else if(i)u="<i class='"+i+"' aria-hidden='true'></i>";else u="";document.getElementById("ul_"+a).insertAdjacentHTML("beforeend","<li class='"+r+" "+d+"'  > "+u+" "+n+"</li>")}document.querySelectorAll("#ul_"+a+" li").forEach((t=>{t.addEventListener("click",(n=>{const o=Array.from(t.parentNode.children).indexOf(t);var s=document.getElementById(this.selector);if(1==this.searchbox)var l=-1;else l="";if(t.classList.contains("bv_disabled")||t.classList.contains("nofocus")||t.classList.contains("bv_separator"));else{if(s.attributes.multiple){var i="";if(event.preventDefault(),m.indexOf(o)>-1){var r=m.indexOf(o);m.splice(r,1),document.getElementById(this.selector)[o+l].selected=!1,t.style.backgroundColor="transparent"}else m.push(o),t.style.backgroundColor="#ececec";if(0==m.length)i=c;else{for(var d=0;d<m.length;d++){var u=m[d];document.getElementById(this.selector).getElementsByTagName("option")[u+l].selected="selected",i+=", "+s[u-1].innerHTML}i=i.substring(2)}document.getElementById("main_"+a).innerHTML=i+"<i id='arrow_"+a+"' class='arrows_bv arrow down'></i>"}else document.getElementById(this.selector).getElementsByTagName("option")[o+l].selected="selected",null!=e.getAttribute("onchange")&&document.getElementById(this.selector).onchange(),document.getElementById("main_"+a).innerHTML=t.textContent+"<i id='arrow_"+a+"' class='arrows_bv arrow down'></i>",document.getElementById("ul_"+a).style.display="none",document.body.classList.remove("stop-scrolling"),document.body.contains(document.getElementById("deletebg"))&&document.getElementById("deletebg").remove(),g();1==this.searchbox&&(document.getElementById("input_"+a).value="",Array.from(document.querySelectorAll("#ul_"+a+" li")).forEach((function(e){e.style.display="block"})))}}))}))},this.CriarDivBase=function(){document.getElementById(this.selector).insertAdjacentHTML("afterend",'<div id="bv_'+a+'" data-search="'+this.searchbox+'" class="bv_mainselect"></div>'),document.getElementById("bv_"+a).insertAdjacentHTML("afterbegin",'<div id="main_'+a+'" style="width:'+this.width+';" class="bv_atual bv_background"></div><ul id="ul_'+a+'" class="bv_ul_inner bv_background"></ul>');var e=document.getElementById("ul_"+a),t=(document.getElementById("bv_"+a),document.getElementById("main_"+a).offsetWidth);e.style.width=t+"px",1==this.searchbox&&document.querySelector("#ul_"+a).insertAdjacentHTML("afterbegin",'<li class="nofocus"><div class="innerinput"><input placeholder="'+d+'" class="bv_input" id="input_'+a+'" type="text"></div</li>');var l=document.getElementById(this.selector);if(l.attributes.multiple)y=c;else{for(var i=0;i<l.length;i++)if(""==l[i].getAttribute("selected"))var u=1;y=1==u?l.options[l.selectedIndex].text:c}document.getElementById("main_"+a).innerHTML=y+"<i id='arrow_"+a+"' class='arrows_bv arrow down'></i>",document.getElementById("main_"+a).addEventListener("click",(function(){document.getElementById("ul_"+a).style.position="absolute",document.getElementById("ul_"+a).style.bottom="",window.innerWidth<r?(document.getElementById("ul_"+a).classList.add("bv_ul_mobile"),document.getElementById(p).insertAdjacentHTML("afterend",'<div id="deletebg" class="bv_ul_bg"></div>'),document.body.classList.add("stop-scrolling")):document.getElementById("ul_"+a).classList.remove("bv_ul_mobile");var t,l,i=document.getElementById("main_"+a).offsetWidth;e.style.width=i+"px","block"==document.getElementById("ul_"+a).style.display?(document.getElementById("ul_"+a).style.display="none",Array.from(document.querySelectorAll(".arrows_bv")).forEach((function(e){e.classList.remove("up"),e.classList.add("down")}))):(Array.from(document.querySelectorAll(".bv_ul_inner")).forEach((function(e){e.style.display="none"})),(t=document.getElementById("ul_"+a)).style.opacity=0,t.style.display=l||"block",function e(){var n=parseFloat(t.style.opacity);(n+=.1)>1||(t.style.opacity=n,requestAnimationFrame(e))}(),Array.from(document.querySelectorAll(".arrows_bv")).forEach((function(e){e.classList.remove("up"),e.classList.add("down")})),document.querySelector("#arrow_"+a).classList.remove("down"),document.querySelector("#arrow_"+a).classList.add("up")),1==s&&g(),1==o&&1==n&&document.getElementById("input_"+a).focus()}),!1),this.SetupListOptions()},this.CriarDivBase(),document.addEventListener("scroll",(function(){0!=u&&(Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)-document.getElementById("main_"+a).lastChild.getBoundingClientRect().top>document.getElementById("ul_"+a).clientHeight&&g())}),!1),1==this.searchbox&&document.getElementById("input_"+a).addEventListener("keyup",(function(){var e,t,n;for(e=document.getElementById("input_"+a).value.toUpperCase(),t=document.getElementById("ul_"+a).getElementsByTagName("li"),Array.from(document.querySelectorAll(".bv_separator")).forEach((function(e){e.style.display="none"})),n=0;n<t.length;n++)""==e?Array.from(document.querySelectorAll("#ul_"+a+" li")).forEach((function(e){e.style.display="block"})):(t[n].innerText||t[n].textContent).toUpperCase().indexOf(e)>-1&&!t[n].classList.contains("bv_separator")?t[n].style.display="":t[n].classList.contains("nofocus")||(t[n].style.display="none")}),!1),document.addEventListener("click",(function(e){e.target.closest(".bv_ul_inner")&&event.target.classList.contains("bv_input")||event.target.classList.contains("bv_input")||event.target.classList.contains("bv_atual")||"LI"!=event.target.nodeName&&(Array.from(document.querySelectorAll(".bv_ul_inner")).forEach((function(e){e.style.display="none"})),Array.from(document.querySelectorAll(".arrows_bv")).forEach((function(e){e.classList.remove("up"),e.classList.add("down")})),Array.from(document.querySelectorAll("#input_"+a)).forEach((function(e){e.value=""})),Array.from(document.querySelectorAll("#ul_"+a+" li")).forEach((function(e){e.style.display="block"})),document.body.classList.remove("stop-scrolling"),document.body.contains(document.getElementById("deletebg"))&&document.getElementById("deletebg").remove(),document.getElementById("ul_"+a)&&(u=0,document.getElementById("ul_"+a).style.position="absolute",document.getElementById("ul_"+a).style.bottom=""))}),!0)}Destroy(){document.getElementById("bv_"+this.randomID).remove(),document.getElementById(this.selector).style.display="block"}Update(){Array.from(document.querySelectorAll("#ul_"+this.randomID+" li")).forEach((function(e){e.classList.contains("nofocus")||e.remove()})),this.SetupListOptions()}GetID(){return this.randomID}Change(e){if(e.placeholder&&(document.getElementById("main_"+this.randomID).innerHTML=e.placeholder+"<i id='arrow_"+this.randomID+"' class='arrows_bv arrow down'></i>"),e.search_placeholder&&(document.getElementById("input_"+this.randomID).placeholder=e.search_placeholder),e.options&&"object"==typeof e.options){document.querySelector("#"+this.selector).innerHTML="";for(var t=Object.keys(e.options).length,n=0;n<t;n++){var o,s,l,i;o=1==e.options[n].disabled?"disabled":"",s=1==e.options[n].separator?"data-separator='true'":"",l=e.options[n].img?"data-img='"+e.options[n].img+"'":"",i=e.options[n].icon?"data-icon='"+e.options[n].icon+"'":"",document.getElementById(this.selector).insertAdjacentHTML("beforeend","<option "+l+" "+i+" "+s+" "+o+" value="+e.options[n].value+" >"+e.options[n].inner_text+"</option>")}}else console.error("Options must be and Object. Read documentation.")}SetOption(e){var t=document.getElementById(this.selector);if("byIndex"==e.type)t.selectedIndex=e.value,null!=t.getAttribute("onchange")&&document.getElementById(this.selector).onchange(),document.getElementById("main_"+this.randomID).innerHTML=t.options[t.selectedIndex].text+"<i id='arrow_"+this.randomID+"' class='arrows_bv arrow down'></i>";else if("byValue"==e.type)for(var n=0;n<t.length;n++)t[n].value==e.value&&(t.selectedIndex=t[n].index,null!=t.getAttribute("onchange")&&document.getElementById(this.selector).onchange(),document.getElementById("main_"+this.randomID).innerHTML=t[n].innerText+"<i id='arrow_"+this.randomID+"' class='arrows_bv arrow down'></i>")}AppendOption(e){if(console.log(e),null==(t=e.position))var t="beforeend";if(e.options&&"object"==typeof e.options)for(var n=Object.keys(e.options).length,o=0;o<n;o++){var s,l,i,r;s=1==e.options[o].disabled?"disabled":"",l=1==e.options[o].separator?"data-separator='true'":"",i=e.options[o].img?"data-img='"+e.options[o].img+"'":"",r=e.options[o].icon?"data-icon='"+e.options[o].icon+"'":"",document.getElementById(this.selector).insertAdjacentHTML(t,"<option "+i+" "+r+" "+l+" "+s+" value="+e.options[o].value+" >"+e.options[o].inner_text+"</option>")}else console.error("Options must be and Object. Read documentation.")}}
